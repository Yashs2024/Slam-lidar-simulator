<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Educational SLAM & LiDAR Simulator</title>
  <meta name="description" content="Interactive browser-based SLAM & LiDAR simulator for robotics education. Features autonomous frontier exploration, A* pathfinding, occupancy grid mapping, and real-time sensor visualization." />
  <!-- Use Google Fonts for a modern, sleek aesthetic -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <!-- Chart.js for Live Data -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="./style.css">
</head>

<body>
  <div id="app">
    <!-- Sidebar Control Panel -->
    <aside class="sidebar">
      <header>
        <h1>SLAM Simulator</h1>
        <p class="subtitle">Interactive Robotics Education</p>
      </header>

      <!-- Performance Stats Dashboard -->
      <section class="stats-dashboard">
        <h3>Performance Stats</h3>
        <div class="stats-grid">
          <div class="stat-card">
            <span class="stat-label">Explored</span>
            <span class="stat-value" id="statExplored">0%</span>
          </div>
          <div class="stat-card">
            <span class="stat-label">Distance</span>
            <span class="stat-value" id="statDistance">0m</span>
          </div>
          <div class="stat-card">
            <span class="stat-label">Collisions</span>
            <span class="stat-value" id="statCollisions">0</span>
          </div>
          <div class="stat-card">
            <span class="stat-label">Time</span>
            <span class="stat-value" id="statTime">0:00</span>
          </div>
        </div>
      </section>

      <section class="controls">
        <div class="control-group">
          <label for="noiseSlider">LiDAR Sensor Noise</label>
          <input type="range" id="noiseSlider" min="0" max="20" value="2" step="1">
          <span id="noiseValue" class="value-display">2%</span>
        </div>

        <div class="control-group">
          <label for="speedSlider">Robot Speed</label>
          <input type="range" id="speedSlider" min="1" max="10" value="5" step="1">
          <span id="speedValue" class="value-display">5x</span>
        </div>

        <div class="control-group">
          <label for="rayDensitySlider">LiDAR Ray Density</label>
          <input type="range" id="rayDensitySlider" min="30" max="360" value="90" step="10">
          <span id="rayDensityValue" class="value-display">90 Rays</span>
        </div>

        <div class="control-group">
          <label for="driftSlider">Odometry Drift</label>
          <input type="range" id="driftSlider" min="0" max="10" value="0" step="1">
          <span id="driftValue" class="value-display">Off</span>
        </div>
      </section>

      <section class="views">
        <h3>Interaction Mode</h3>
        <div class="button-group">
          <button id="btnDriveMode" class="active">Drive Mode</button>
          <button id="btnBuildMode">Build Mode</button>
        </div>
        <button id="btnAutoExplore" class="auto-explore-btn">üß≠ Auto Explore</button>
      </section>

      <section class="views">
        <h3>Viewport Toggle</h3>
        <div class="button-group">
          <button id="btnRealWorld" class="active">Real World</button>
          <button id="btnSlamMap">SLAM Map</button>
        </div>
      </section>

      <section class="instructions" id="instructionsDrive">
        <h3>Controls</h3>
        <p><kbd>W</kbd> Move Forward</p>
        <p><kbd>S</kbd> Move Backward</p>
        <p><kbd>A</kbd> Rotate Left</p>
        <p><kbd>D</kbd> Rotate Right</p>
        <p>Click on SLAM Map to Auto-Navigate</p>
      </section>

      <section class="instructions hidden" id="instructionsBuild">
        <h3>Build Controls</h3>
        <p>Click and Drag on Real World to draw custom walls.</p>
      </section>

      <section class="chart-container">
        <h3>Live Sensor Data</h3>
        <div class="chart-wrapper">
          <canvas id="lidarChart"></canvas>
        </div>
      </section>

      <!-- Environment Presets & Map Tools -->
      <section class="map-tools">
        <h3>Environment Presets</h3>
        <select id="presetSelect" class="preset-select">
          <option value="random">üé≤ Random</option>
          <option value="maze">üèóÔ∏è Maze</option>
          <option value="warehouse">üì¶ Warehouse</option>
          <option value="office">üè¢ Office</option>
          <option value="lshape">‚Ü∞ L-Shape</option>
          <option value="open">üèúÔ∏è Open Field</option>
        </select>
        <div class="map-buttons">
          <button id="btnExportMap" class="tool-btn">üì§ Export Map</button>
          <button id="btnImportMap" class="tool-btn">üì• Import Map</button>
          <input type="file" id="importFileInput" accept=".json" style="display:none;" />
        </div>
      </section>

      <footer>
        <button id="btnReset" class="danger-btn" style="margin-bottom: 0.5rem;">Reset Map</button>
        <button id="btnClearCustom" class="danger-btn">Clear Custom Walls</button>
      </footer>
    </aside>

    <!-- Main Canvas Area -->
    <main class="canvas-container">
      <!-- Canvas for the 'Real World' view -->
      <canvas id="realWorldCanvas"></canvas>
      <!-- Canvas for the generated Occupancy Grid view (hidden by default initially) -->
      <canvas id="slamCanvas" class="hidden"></canvas>
    </main>
  </div>

  <script type="module" src="./src/main.js"></script>
</body>

</html>